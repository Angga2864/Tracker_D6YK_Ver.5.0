<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ESTIMATE RAILWAYS JOGJA</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" />
    <style>
        :root {
            --primary-color: #1E40AF;
            --secondary-color: #3B82F6;
            --accent-color: #F59E0B;
            --light-color: #0cc928;
            --dark-color: #2c3e50;
            --success-color: #f40505;
            --warning-color: #ff6f00;
            --danger-color: #4d4c4b;
            --darkorange-color: #ff3131;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: "Roboto", sans-serif;
            background-color: #464242;
            color: #333;
            line-height: 1.6;
            padding-top: 50px;
            /* âœ… Tambahkan ini */
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            background-color: var(--primary-color);
            color: white;
            padding: 20px 0;
            text-align: center;
            border-radius: 8px 8px 0 0;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
        }


        h1 {
            font-size: 2.2rem;
            margin-bottom: 10px;
        }

        .station-selector {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 30px;
        }

        .station-btn {
            padding: 12px 25px;
            border: none;
            border-radius: 50px;
            background-color: var(--secondary-color);
            color: white;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }

        .station-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .station-btn.active {
            background-color: var(--warning-color);
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .realtime-info {
            background-color: white;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 30px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            text-align: center;
        }

        .current-time {
            font-size: 1.8rem;
            font-weight: 500;
            color: var(--dark-color);
            margin-bottom: 5px;
        }

        .current-date {
            font-size: 1.2rem;
            color: #666;
            margin-bottom: 20px;
        }

        .station-name {
            font-size: 1.5rem;
            color: var(--accent-color);
            margin-bottom: 20px;
            font-weight: 700;
        }

        .train-sections {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .train-section {
            background-color: white;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .section-title {
            font-size: 1.3rem;
            font-weight: 700;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #eee;
            color: var(--secondary-color);
        }

        .passed .section-title {
            color: var(--darkorange-color);
        }

        .current .section-title {
            color: var(--primary-color);
        }

        .upcoming .section-title {
            color: var(--warning-color);
        }

        .train-list {
            list-style: none;
        }

        .train-item {
            padding: 15px 0;
            border-bottom: 1px solid #eee;
        }

        .train-item:last-child {
            border-bottom: none;
        }

        .train-number {
            font-weight: 700;
            color: var(--dark-color);
            font-size: 1.1rem;
        }

        .train-name {
            font-weight: 500;
            margin: 5px 0;
        }

        .train-time {
            font-size: 0.9rem;
            color: #666;
        }

        .train-status {
            display: inline-block;
            padding: 3px 8px;
            border-radius: 4px;
            font-size: 0.8rem;
            font-weight: 500;
            margin-top: 5px;
        }

        .train-status.berhenti {
            background-color: var(--success-color);
            color: white;
        }

        .train-status.langsung {
            background-color: var(--light-color);
            color: white;
        }

        .no-trains {
            color: #666;
            font-style: italic;
            padding: 15px 0;
        }

        footer {
            text-align: center;
            padding: 20px;
            color: #666;
            font-size: 0.9rem;
            margin-top: 30px;
        }

        /*tombol refresh */
        .refresh-btn {
            display: block;
            margin: 0 auto 30px;
            padding: 12px 25px;
            background-color: var(--darkorange-color);
            color: white;
            border: none;
            border-radius: 50px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);

        }

        .refresh-btn:hover {
            background-color: #2980b9;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        @media (max-width: 768px) {
            .station-selector {
                flex-direction: column;
                align-items: center;
            }

            .station-btn {
                width: 100%;
                max-width: 300px;
            }

            .train-sections {
                grid-template-columns: 1fr;
            }

            h1 {
                font-size: 1.8rem;
            }
        }

        /* Style tambahan untuk form kritik dan saran */
        .feedback-section {
            background-color: white;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 30px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .feedback-title {
            font-size: 1.3rem;
            font-weight: 700;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #eee;
            color: var(--secondary-color);
        }

        .feedback-form {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .feedback-input {
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-family: "Roboto", sans-serif;
            font-size: 1rem;
            resize: vertical;
            min-height: 100px;
        }

        .feedback-input:focus {
            outline: none;
            border-color: var(--accent-color);
            box-shadow: 0 0 0 2px rgba(52, 152, 219, 0.2);
        }

        .feedback-submit {
            padding: 12px 25px;
            background-color: var(--light-color);
            color: white;
            border: none;
            border-radius: 50px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
            align-self: flex-end;
        }

        .feedback-submit:hover {
            background-color: #27ae60;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .feedback-submit:disabled {
            background-color: #95a5a6;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        @media (max-width: 768px) {
            .feedback-submit {
                align-self: stretch;
            }
        }

        /* Style untuk tombol jadwal lengkap */
        .schedule-btn {
            padding: 12px 25px;
            background-color: var(--warning-color);
            color: white;
            border: none;
            border-radius: 50px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .schedule-btn:hover {
            background-color: #2980b9;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        /* Modal styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            overflow: auto;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .modal.show {
            display: flex;
            justify-content: center;
            align-items: flex-start;
            opacity: 1;
        }

        .modal-content {
            background-color: white;
            margin: 40px auto;
            border-radius: 8px;
            width: 90%;
            max-width: 1000px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            position: relative;
            transform: translateY(-20px);
            transition: transform 0.3s ease;
        }

        .modal.show .modal-content {
            transform: translateY(0);
        }

        .modal-header {
            padding: 20px;
            border-bottom: 1px solid #eee;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background-color: var(--primary-color);
            color: white;
            border-radius: 8px 8px 0 0;
        }

        .modal-title {
            font-size: 1.5rem;
            font-weight: 700;
        }

        .close-btn {
            background: none;
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            transition: transform 0.3s ease;
        }

        .close-btn:hover {
            transform: rotate(90deg);
        }

        .modal-body {
            padding: 20px;
            max-height: 70vh;
            overflow-y: auto;
        }

        /* Tabel jadwal */
        .schedule-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
        }

        .schedule-table th,
        .schedule-table td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #eee;
        }

        .schedule-table th {
            background-color: var(--secondary-color);
            color: white;
            position: sticky;
            top: 0;
        }

        .schedule-table tr:nth-child(even) {
            background-color: #f9f9f9;
        }

        .schedule-table tr:hover {
            background-color: #f1f1f1;
        }

        .status-badge {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.8rem;
            font-weight: 500;
            text-align: center;
            min-width: 70px;
        }

        .status-berhenti {
            background-color: var(--success-color);
            color: white;
        }

        .status-langsung {
            background-color: var(--light-color);
            color: white;
        }

        .schedule-controls {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 10px;
        }

        .search-box {
            padding: 10px 15px;
            border: 1px solid #ddd;
            border-radius: 50px;
            font-size: 1rem;
            min-width: 250px;
        }

        .station-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .station-tab {
            padding: 10px 20px;
            background-color: #f1f1f1;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .station-tab.active {
            background-color: var(--accent-color);
            color: white;
        }

        @media (max-width: 768px) {
            .modal-content {
                width: 95%;
                margin: 20px auto;
            }

            .schedule-table {
                font-size: 0.9rem;
            }

            .schedule-table th,
            .schedule-table td {
                padding: 8px 10px;
            }

            .schedule-controls {
                flex-direction: column;
            }

            .search-box {
                min-width: 100%;
            }

            .station-tabs {
                overflow-x: auto;
                white-space: nowrap;
                padding-bottom: 10px;
            }
        }

        /* Running Text Styles */
        .running-text-container {
            background-color: var(--secondary-color);
            color: white;
            padding: 10px 0;
            overflow: hidden;
            position: fixed;
            /* âœ… Biar nempel di layar */
            top: 0;
            /* âœ… Di atas halaman */
            left: 0;
            width: 100%;
            /* âœ… Lebar penuh */
            z-index: 999;
            /* âœ… Supaya tidak ketutup elemen lain */
            border-radius: 0;
            /* Hilangkan radius biar rata */
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }


        .running-text {
            display: flex;
            align-items: center;
            white-space: nowrap;
            animation: runText 30s linear infinite;
        }

        .running-icon {
            margin-right: 15px;
            font-size: 1.2rem;
            color: var(--primary-color);
        }

        .running-content {
            font-weight: 500;
        }

        @keyframes runText {
            0% {
                transform: translateX(100%);
            }

            100% {
                transform: translateX(-100%);
            }
        }

        /* Hover pause effect */
        .running-text-container:hover .running-text {
            animation-play-state: paused;
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            .running-text {
                animation: runText 20s linear infinite;
            }

            .running-icon {
                font-size: 1rem;
                margin-right: 10px;
            }
        }

        /* Styles untuk fitur rating dan ulasan */
        .review-form-container {
            background-color: #f9f9f9;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 25px;
            box-shadow: 0 1px 5px rgba(0, 0, 0, 0.1);
        }

        .review-form-container h3 {
            margin-bottom: 15px;
            color: var(--dark-color);
            font-size: 1.1rem;
        }

        .rating-input {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }

        .rating-label {
            margin-right: 15px;
            font-weight: 500;
            color: var(--dark-color);
        }

        .star-rating {
            display: inline-flex;
            direction: rtl;
            /* Untuk reverse order agar hover bekerja dengan baik */
        }

        .star-rating i {
            font-size: 1.8rem;
            color: #ddd;
            cursor: pointer;
            transition: color 0.2s ease;
            margin: 0 2px;
        }

        .star-rating i:hover,
        .star-rating i:hover~i,
        .star-rating i.active {
            color: var(--accent-color);
        }

        .reviewer-info {
            margin-bottom: 15px;
        }

        .review-input {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-family: "Roboto", sans-serif;
            font-size: 1rem;
            margin-bottom: 15px;
            resize: vertical;
        }

        .review-input:focus {
            outline: none;
            border-color: var(--accent-color);
            box-shadow: 0 0 0 2px rgba(245, 158, 11, 0.2);
        }

        .review-submit {
            padding: 12px 25px;
            background-color: var(--accent-color);
            color: white;
            border: none;
            border-radius: 50px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }

        .review-submit:hover {
            background-color: #e69008;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .review-submit:disabled {
            background-color: #95a5a6;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .reviews-container h3 {
            margin-bottom: 15px;
            color: var(--dark-color);
            font-size: 1.1rem;
            padding-bottom: 10px;
            border-bottom: 2px solid #eee;
        }

        .reviews-list {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .review-item {
            background-color: white;
            border-radius: 8px;
            padding: 15px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }

        .review-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .reviewer-name {
            font-weight: 500;
            color: var(--dark-color);
        }

        .review-date {
            font-size: 0.85rem;
            color: #777;
        }

        .review-stars {
            color: var(--accent-color);
            margin-bottom: 10px;
        }

        .review-content {
            color: #444;
            line-height: 1.5;
        }

        .no-reviews {
            text-align: center;
            color: #777;
            font-style: italic;
            padding: 20px 0;
        }

        @media (max-width: 768px) {
            .rating-input {
                flex-direction: column;
                align-items: flex-start;
            }

            .rating-label {
                margin-bottom: 10px;
                margin-right: 0;
            }

            .review-header {
                flex-direction: column;
                align-items: flex-start;
            }

            .review-date {
                margin-top: 5px;
            }
        }
    </style>
</head>

<body>
    <div class="container">
        <header>
            <h1><i class="fas fa-train"></i> Tracker Jadwal Kereta Api Yogyakarta</h1>
            <p>Pantau jadwal perjalanan kereta api di stasiun besar Jogjakarta pilihan Anda</p>
        </header>

        <div class="running-text-container">
            <div class="running-text">
                <span class="running-icon"><i class="fas fa-info-circle"></i></span>
                <span class="running-content" id="runningTextContent">Informasi terbaru akan ditampilkan di sini. Pantau
                    terus pergerakan kereta api di stasiun Yogyakarta dan Lempuyangan.</span>
            </div>
        </div>

        <div class="station-selector">
            <button class="station-btn" data-station="YK">Stasiun Yogyakarta (YK)</button>
            <button class="station-btn" data-station="LPN">Stasiun Lempuyangan (LPN)</button>
        </div>

        <button id="refreshBtn" class="refresh-btn"><i class="fas fa-sync-alt"></i> Refresh Data</button>




        <div class="realtime-info">
            <div class="current-time" id="currentTime">00:00:00</div>
            <div class="current-date" id="currentDate">Hari, 1 Januari 2025</div>
            <div class="station-name" id="stationName">Pilih stasiun untuk memulai</div>
        </div>

        <div class="train-sections">
            <div class="train-section passed">
                <h2 class="section-title"><i class="fas fa-history"></i> Sudah Melintas</h2>
                <ul class="train-list" id="passedTrains">
                    <li class="no-trains">Pilih stasiun untuk melihat data</li>
                </ul>
            </div>

            <div class="train-section current">
                <h2 class="section-title"><i class="fas fa-clock"></i> Sedang Melintas</h2>
                <ul class="train-list" id="currentTrains">
                    <li class="no-trains">Pilih stasiun untuk melihat data</li>
                </ul>
            </div>

            <div class="train-section upcoming">
                <h2 class="section-title"><i class="fas fa-arrow-up"></i> Segera Melintas</h2>
                <ul class="train-list" id="upcomingTrains">
                    <li class="no-trains">Pilih stasiun untuk melihat data</li>
                </ul>
            </div>
        </div>
    </div>

    <!-- Tambahkan tombol untuk menampilkan jadwal lengkap -->
    <button id="showScheduleBtn" class="schedule-btn">
        <i class="fas fa-calendar-alt"></i> Lihat Jadwal Lengkap...
    </button>

    <!-- Modal untuk jadwal lengkap -->
    <div id="scheduleModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Jadwal Lengkap Kereta Api</h2>
                <button class="close-btn">&times;</button>
            </div>
            <div class="modal-body">
                <div class="station-tabs">
                    <button class="station-tab active" data-station="YK">Stasiun Yogyakarta</button>
                    <button class="station-tab" data-station="LPN">Stasiun Lempuyangan</button>
                </div>

                <div class="schedule-controls">
                    <input type="text" id="trainSearch" class="search-box" placeholder="Cari kereta...">
                </div>

                <div id="scheduleTableContainer"></div>
            </div>
        </div>
    </div>

    <!-- Tambahkan setelah tombol Refresh Data -->
    <button id="musicBtn" class="refresh-btn">
        <i class="fas fa-music"></i> Bel Kedatangan
    </button>

    <!-- Audio player tersembunyi -->
    <audio id="bgMusic" loop>
        <source src="musik.mp3" type="audio/mpeg">
        Browser Anda tidak mendukung pemutar audio.
    </audio>
    <!-- Tambahkan section untuk kritik dan saran -->
    <div class="feedback-section">
        <h2 class="feedback-title"><i class="fas fa-comment"></i> Kritik dan Saran</h2>
        <form class="feedback-form" id="feedbackForm">
            <textarea class="feedback-input" id="feedbackInput" placeholder="Masukkan kritik dan saran Anda di sini..."
                required></textarea>
            <button type="submit" class="feedback-submit" id="feedbackSubmit">
                <i class="fab fa-whatsapp"></i> Kirim via WhatsApp
            </button>
        </form>

        <!-- Bagian Rating dan Ulasan -->
        <div class="feedback-section">
            <h2 class="feedback-title"><i class="fas fa-star"></i> Rating dan Ulasan</h2>

            <!-- Form untuk menambahkan ulasan baru -->
            <div class="review-form-container">
                <h3>Beri Rating untuk Layanan Kami</h3>
                <form class="review-form" id="reviewForm">
                    <div class="rating-input">
                        <span class="rating-label">Rating:</span>
                        <div class="star-rating">
                            <i class="far fa-star" data-rating="1"></i>
                            <i class="far fa-star" data-rating="2"></i>
                            <i class="far fa-star" data-rating="3"></i>
                            <i class="far fa-star" data-rating="4"></i>
                            <i class="far fa-star" data-rating="5"></i>
                        </div>
                        <input type="hidden" id="ratingValue" name="rating" value="0">
                    </div>

                    <div class="reviewer-info">
                        <input type="text" id="reviewerName" class="review-input" placeholder="Nama Anda (opsional)"
                            maxlength="50">
                    </div>

                    <textarea class="review-input" id="reviewContent"
                        placeholder="Bagikan pengalaman Anda menggunakan layanan kami..." required rows="4"></textarea>

                    <button type="submit" class="review-submit">
                        <i class="fas fa-paper-plane"></i> Kirim Ulasan
                    </button>
                </form>
            </div>

            <!-- Daftar ulasan yang sudah diterima -->
            <div class="reviews-container">
                <h3>Ulasan Pengguna</h3>
                <div id="reviewsList" class="reviews-list">
                    <p class="no-reviews">Belum ada ulasan. Jadilah yang pertama memberikan ulasan!</p>
                </div>
            </div>
        </div>


        <footer>
            <p>Dibuat dengan <i class="fas fa-heart" style="color: #e74c3c"></i> oleh Didan Arisdya A P - 2025
                [ver.5.0.]</p>
        </footer>

        <script>
            // Fungsi untuk mengupdate running text
            function updateRunningText(station) {
                const runningTextContent = document.getElementById('runningTextContent');
                const currentMinutes = currentTime.getHours() * 60 + currentTime.getMinutes();

                // Ambil jadwal terdekat
                const upcomingTrains = trainSchedules[station]
                    .filter(train => timeToMinutes(train.time) > currentMinutes)
                    .sort((a, b) => timeToMinutes(a.time) - timeToMinutes(b.time))
                    .slice(0, 3);

                if (upcomingTrains.length > 0) {
                    const nextTrain = upcomingTrains[0];
                    const formattedTime = formatTime(nextTrain.time);

                    let message = ` Dear Passengers, ${nextTrain.number} ${nextTrain.name} `;
                    message += `akan ${nextTrain.status === 'berhenti' ? 'berhenti' : 'melintas'} di ${stationNames[station]} `;
                    message += `pukul ${formattedTime} WIB.  `;

                    if (upcomingTrains.length > 1) {
                        message += `Dilanjutkan ${upcomingTrains[1].number} (${formatTime(upcomingTrains[1].time)}) `;
                        if (upcomingTrains.length > 2) {
                            message += `dan ${upcomingTrains[2].number} (${formatTime(upcomingTrains[2].time)}) `;
                        }
                    }

                    runningTextContent.textContent = message;
                } else {
                    runningTextContent.textContent = `Tidak ada jadwal kereta yang akan datang di ${stationNames[station]}.`;
                }
            }

            // Panggil fungsi updateRunningText saat stasiun berubah
            document.querySelectorAll('.station-btn').forEach((btn) => {
                btn.addEventListener('click', function () {
                    // ... kode yang sudah ada ...
                    updateRunningText(this.dataset.station);
                });
            });

            // Panggil juga saat refresh
            document.getElementById('refreshBtn').addEventListener('click', function () {
                if (currentStation) {
                    updateRunningText(currentStation);
                }
            });

            // Musik otomatis diputar saat halaman dibuka (jika browser mengizinkan)
            document.addEventListener("DOMContentLoaded", function () {
                const music = document.getElementById("bgMusic");
                const musicBtn = document.getElementById("musicBtn");
                let isPlaying = false;

                // Coba autoplay
                music.play().then(() => {
                    isPlaying = true;
                    musicBtn.innerHTML = '<i class="fas fa-pause"></i> Hentikan Musik';
                }).catch(() => {
                    // Kalau autoplay diblokir, tunggu klik user
                    isPlaying = false;
                    musicBtn.innerHTML = '<i class="fas fa-play"></i> Lagu Kedatangan';
                });

                // Toggle musik saat tombol diklik
                musicBtn.addEventListener("click", () => {
                    if (isPlaying) {
                        music.pause();
                        isPlaying = false;
                        musicBtn.innerHTML = '<i class="fas fa-play"></i> Putar Musik';
                    } else {
                        music.play();
                        isPlaying = true;
                        musicBtn.innerHTML = '<i class="fas fa-pause"></i> Hentikan Musik';
                    }
                });
            });


            // Inisialisasi running text saat halaman dimuat
            document.addEventListener('DOMContentLoaded', function () {
                // ... kode yang sudah ada ...
                setTimeout(() => {
                    updateRunningText('YK'); // Default stasiun
                }, 1000);
            });
            // Database jadwal kereta api
            const trainSchedules = {
                YK: [
                    { number: "KA 273", name: "Kahuripan", time: "00:02:59", status: "langsung" },
                    { number: "KA 252", name: "Jayakarta", time: "00:29:00", status: "langsung" },
                    { number: "KA 255", name: "Jaka Tingkir", time: "00:33:00", status: "langsung" },
                    { number: "PLB 7001", name: "Gajayana Tambahan", time: "00:40:00", status: "berhenti" },
                    { number: "KA 68", name: "Malabar", time: "00:51:00", status: "berhenti" },
                    { number: "KA 301", name: "Parcel Tengah", time: "00:56:59", status: "langsung" },
                    { number: "KA 305", name: "Parcel Selatan", time: "01:18:00", status: "langsung" },
                    { number: "KA 36", name: "Gajayana", time: "01:23:59", status: "berhenti" },
                    { number: "KA 169", name: "Malioboro Ekspres", time: "01:34:59", status: "berhenti" },
                    { number: "KA 104", name: "Bogowonto", time: "01:38:00", status: "berhenti" },
                    { number: "KA 80", name: "Lodaya", time: "01:47:00", status: "berhenti" },
                    { number: "KA 87F", name: "Sancaka", time: "01:59:59", status: "berhenti" },
                    { number: "KA 108", name: "Senja Utama Yk", time: "01:59:59", status: "langsung" },
                    { number: "KA 306", name: "Parcel Selatan", time: "02:24:00", status: "langsung" },
                    { number: "KA 2711", name: "Bungtalun Service", time: "02:28:59", status: "langsung" },
                    { number: "KA 72", name: "Mutiara Selatan", time: "02:35:00", status: "berhenti" },
                    { number: "KA 14", name: "Argo Lawu", time: "02:46:59", status: "berhenti" },
                    { number: "KA 302", name: "Parcel Tengah", time: "03:09:59", status: "langsung" },
                    { number: "KA 2721", name: "Kalem Service", time: "03:15:00", status: "langsung" },
                    { number: "KA 48", name: "Taksaka", time: "03:29:59", status: "berhenti" },
                    { number: "KA 2601", name: "Mawalo Tanker", time: "03:31:59", status: "langsung" },
                    { number: "KA 144", name: "Madiun Jaya", time: "03:56:59", status: "berhenti" },
                    { number: "KA 521", name: "Bandara YIA", time: "04:20:00", status: "berhenti" },
                    { number: "KA 76", name: "Mataram", time: "04:34:59", status: "berhenti" },
                    { number: "PLB 7025", name: "Tambahan SLO PSE", time: "04:52:00", status: "berhenti" },
                    { number: "KA 2750F", name: "Cilace Trans", time: "04:57:59", status: "langsung" },
                    { number: "KA 720", name: "Commuter Line Yogyakarta", time: "05:05:00", status: "berhenti" },
                    { number: "KA 561", name: "Bandara YIA", time: "05:10:00", status: "berhenti" },
                    { number: "KA 150", name: "Singasari", time: "05:26:59", status: "langsung" },
                    { number: "KA 64", name: "Manahan", time: "05:39:00", status: "berhenti" },
                    { number: "KA 729F", name: "Commuter Line Yogyakarta", time: "05:48:00", status: "berhenti" },
                    { number: "PLB 7007", name: "Tambahan YK GMR", time: "05:55:00", status: "langsung" },
                    { number: "KA 522", name: "Bandara YIA", time: "05:55:00", status: "berhenti" },
                    { number: "KA 547F", name: "Bandara YIA", time: "06:00:00", status: "berhenti" },
                    { number: "KA 730F", name: "Commuter Line Yogyakarta", time: "06:00:00", status: "berhenti" },
                    { number: "KA 508", name: "Commuter Line Prameks Kutoarjo", time: "06:09:59", status: "berhenti" },
                    { number: "KA 274", name: "Kahuripan", time: "06:20:00", status: "langsung" },
                    { number: "KA 701", name: "Commuter Line Yogyakarta", time: "06:23:00", status: "berhenti" },
                    { number: "KA 523", name: "Bandara YIA", time: "06:29:59", status: "berhenti" },
                    { number: "KA 258", name: "Progo", time: "06:35:00", status: "langsung" },
                    { number: "KA 501", name: "Commuter Line Prameks Kutoarjo", time: "06:40:00", status: "berhenti" },
                    { number: "KA 84", name: "Sancaka", time: "06:45:00", status: "berhenti" },
                    { number: "KA 562", name: "Bandara YIA", time: "06:58:59", status: "berhenti" },
                    { number: "KA 109", name: "Fajar Utama Yk", time: "07:00:00", status: "berhenti" },
                    { number: "KA 702", name: "Commuter Line Yogyakarta", time: "07:05:00", status: "berhenti" },
                    { number: "KA 193", name: "Joglosemarkerto", time: "07:05:59", status: "berhenti" },
                    { number: "KA 2712", name: "Bungtalun Service", time: "07:14:59", status: "langsung" },
                    { number: "KA 711", name: "Commuter Line Yogyakarta", time: "07:29:00", status: "berhenti" },
                    { number: "KA 43", name: "Taksaka", time: "07:30:00", status: "berhenti" },
                    { number: "PLB 7002", name: "Gajayana Tambahan", time: "07:32:00", status: "berhenti" },
                    { number: "KA 548F", name: "Bandara YIA", time: "07:34:59", status: "berhenti" },
                    { number: "KA 535", name: "Bandara YIA", time: "07:39:59", status: "berhenti" },
                    { number: "KA 712", name: "Commuter Line Yogyakarta", time: "07:54:00", status: "berhenti" },
                    { number: "KA 549", name: "Bandara YIA", time: "07:57:00", status: "berhenti" },
                    { number: "KA 77", name: "Lodaya", time: "08:06:00", status: "berhenti" },
                    { number: "KA 103", name: "Bogowonto", time: "08:19:00", status: "berhenti" },
                    { number: "KA 524", name: "Bandara YIA", time: "08:24:59", status: "berhenti" },
                    { number: "KA 525", name: "Bandara YIA", time: "08:33:00", status: "berhenti" },
                    { number: "KA 721", name: "Commuter Line Yogyakarta", time: "08:39:00", status: "berhenti" },
                    { number: "KA 511F", name: "Commuter Line Prameks Kebumen", time: "08:44:59", status: "berhenti" },
                    { number: "KA 722", name: "Commuter Line Yogyakarta", time: "08:49:00", status: "berhenti" },
                    { number: "PLB 7011", name: "Tambahan SLO BD", time: "08:53:00", status: "berhenti" },
                    { number: "KA 563", name: "Bandara YIA", time: "08:55:00", status: "berhenti" },
                    { number: "KA 202", name: "Joglosemarkerto", time: "09:02:59", status: "berhenti" },
                    { number: "KA 731F", name: "Commuter Line Yogyakarta", time: "09:06:59", status: "berhenti" },
                    { number: "KA 536", name: "Bandara YIA", time: "09:15:00", status: "berhenti" },
                    { number: "KA 13", name: "Argo Lawu", time: "09:15:00", status: "berhenti" },
                    { number: "KA 248", name: "Logawa", time: "09:27:00", status: "langsung" },
                    { number: "KA 537", name: "Bandara YIA", time: "09:27:59", status: "berhenti" },
                    { number: "KA 732F", name: "Commuter Line Yogyakarta", time: "09:36:00", status: "berhenti" },
                    { number: "KA 75", name: "Mataram", time: "09:36:00", status: "berhenti" },
                    { number: "KA 550", name: "Bandara YIA", time: "09:40:00", status: "berhenti" },
                    { number: "KA 551", name: "Bandara YIA", time: "09:51:00", status: "berhenti" },
                    { number: "KA 275", name: "Pasundan", time: "09:58:59", status: "langsung" },
                    { number: "KA 502", name: "Commuter Line Prameks Kutoarjo", time: "10:05:00", status: "berhenti" },
                    { number: "KA 143", name: "Madiun Jaya", time: "10:09:00", status: "berhenti" },
                    { number: "KA 201", name: "Joglosemarkerto", time: "10:20:00", status: "berhenti" },
                    { number: "KA 703", name: "Commuter Line Yogyakarta", time: "10:27:00", status: "berhenti" },
                    { number: "KA 526", name: "Bandara YIA", time: "10:32:00", status: "berhenti" },
                    { number: "KA 61", name: "Manahan", time: "10:34:59", status: "berhenti" },
                    { number: "KA 170", name: "Malioboro Ekspres", time: "10:45:00", status: "berhenti" },
                    { number: "KA 161", name: "Bangunkarta", time: "10:45:59", status: "berhenti" },
                    { number: "KA 538", name: "Bandara YIA", time: "10:54:59", status: "berhenti" },
                    { number: "KA 704", name: "Commuter Line Yogyakarta", time: "10:56:00", status: "berhenti" },
                    { number: "KA 81", name: "Sancaka", time: "10:59:59", status: "berhenti" },
                    { number: "KA 539", name: "Bandara YIA", time: "11:03:00", status: "berhenti" },
                    { number: "KA 2602", name: "Mawalo Tanker", time: "11:06:59", status: "langsung" },
                    { number: "KA 89", name: "Gayabaru Malam Selatan", time: "11:15:00", status: "langsung" },
                    { number: "KA 2716", name: "Karsolo Service", time: "11:15:59", status: "langsung" },
                    { number: "KA 69", name: "Malabar", time: "11:26:00", status: "berhenti" },
                    { number: "KA 552", name: "Bandara YIA", time: "11:28:59", status: "berhenti" },
                    { number: "KA 82", name: "Sancaka", time: "11:30:00", status: "berhenti" },
                    { number: "KA 154", name: "Ranggajati", time: "11:41:00", status: "berhenti" },
                    { number: "KA 503", name: "Commuter Line Prameks Kutoarjo", time: "11:50:00", status: "berhenti" },
                    { number: "KA 713", name: "Commuter Line Yogyakarta", time: "11:59:00", status: "berhenti" },
                    { number: "KA 723", name: "Commuter Line Yogyakarta", time: "11:59:00", status: "berhenti" },
                    { number: "KA 527", name: "Bandara YIA", time: "12:00:00", status: "berhenti" },
                    { number: "KA 724", name: "Commuter Line Yogyakarta", time: "12:07:00", status: "berhenti" },
                    { number: "KA 9", name: "Argo Wilis", time: "12:09:59", status: "berhenti" },
                    { number: "KA 564", name: "Bandara YIA", time: "12:11:00", status: "berhenti" },
                    { number: "KA 512F", name: "Commuter Line Prameks Kebumen", time: "12:22:59", status: "berhenti" },
                    { number: "KA 74", name: "Fajar Utama Solo", time: "12:33:00", status: "berhenti" },
                    { number: "KA 565", name: "Bandara YIA", time: "12:35:00", status: "berhenti" },
                    { number: "KA 733F", name: "Commuter Line Yogyakarta", time: "12:40:59", status: "berhenti" },
                    { number: "KA 6", name: "Argo Semeru", time: "12:45:00", status: "berhenti" },
                    { number: "KA 5", name: "Argo Semeru", time: "12:51:00", status: "berhenti" },
                    { number: "KA 540", name: "Bandara YIA", time: "12:58:59", status: "berhenti" },
                    { number: "KA 235F", name: "Sancaka Utara", time: "13:00:59", status: "berhenti" },
                    { number: "KA 78", name: "Lodaya", time: "13:12:00", status: "berhenti" },
                    { number: "KA 257", name: "Progo", time: "13:14:00", status: "langsung" },
                    { number: "KA 10", name: "Argo Wilis", time: "13:23:59", status: "berhenti" },
                    { number: "KA 553", name: "Bandara YIA", time: "13:27:59", status: "berhenti" },
                    { number: "KA 734F", name: "Commuter Line Yogyakarta", time: "13:30:59", status: "berhenti" },
                    { number: "KA 46", name: "Taksaka", time: "13:50:00", status: "berhenti" },
                    { number: "KA 714", name: "Commuter Line Yogyakarta", time: "13:57:00", status: "berhenti" },
                    { number: "KA 2603", name: "Mawalo Tanker", time: "13:59:59", status: "langsung" },
                    { number: "KA 528", name: "Bandara YIA", time: "14:03:59", status: "berhenti" },
                    { number: "KA 705", name: "Commuter Line Yogyakarta", time: "14:12:00", status: "berhenti" },
                    { number: "KA 529", name: "Bandara YIA", time: "14:12:59", status: "berhenti" },
                    { number: "KA 504", name: "Commuter Line Prameks Kutoarjo", time: "14:19:00", status: "langsung" },
                    { number: "KA 153", name: "Ranggajati", time: "14:21:59", status: "berhenti" },
                    { number: "KA 167", name: "Kertanegara", time: "14:30:59", status: "berhenti" },
                    { number: "KA 188", name: "Joglosemarkerto", time: "14:33:00", status: "berhenti" },
                    { number: "KA 47", name: "Taksaka", time: "14:44:59", status: "berhenti" },
                    { number: "KA 16", name: "Argo Dwipangga", time: "14:51:00", status: "berhenti" },
                    { number: "KA 706", name: "Commuter Line Yogyakarta", time: "15:01:00", status: "berhenti" },
                    { number: "KA 541", name: "Bandara YIA", time: "15:02:00", status: "berhenti" },
                    { number: "KA 725", name: "Commuter Line Yogyakarta", time: "15:06:00", status: "berhenti" },
                    { number: "KA 110", name: "Fajar Utama Yk", time: "15:09:59", status: "langsung" },
                    { number: "KA 505", name: "Commuter Line Prameks Kutoarjo", time: "15:15:00", status: "langsung" },
                    { number: "KA 85", name: "Sancaka", time: "15:15:00", status: "berhenti" },
                    { number: "KA 554", name: "Bandara YIA", time: "15:20:00", status: "berhenti" },
                    { number: "KA 555", name: "Bandara YIA", time: "15:29:59", status: "berhenti" },
                    { number: "KA 566", name: "Bandara YIA", time: "15:35:00", status: "berhenti" },
                    { number: "KA 106", name: "Gajahwong", time: "15:45:59", status: "berhenti" },
                    { number: "PLB 7021", name: "Pasundan Tambahan", time: "15:47:00", status: "langsung" },
                    { number: "KA 567", name: "Bandara YIA", time: "15:49:00", status: "berhenti" },
                    { number: "KA 530", name: "Bandara YIA", time: "15:58:59", status: "berhenti" },
                    { number: "KA 531", name: "Bandara YIA", time: "16:07:00", status: "berhenti" },
                    { number: "KA 726", name: "Commuter Line Yogyakarta", time: "16:10:00", status: "berhenti" },
                    { number: "KA 509", name: "Commuter Line Prameks Kebumen", time: "16:20:00", status: "berhenti" },
                    { number: "KA 542", name: "Bandara YIA", time: "16:21:59", status: "berhenti" },
                    { number: "KA 70", name: "Malabar", time: "16:30:00", status: "berhenti" },
                    { number: "KA 543", name: "Bandara YIA", time: "16:48:00", status: "berhenti" },
                    { number: "KA 556", name: "Bandara YIA", time: "16:52:00", status: "berhenti" },
                    { number: "KA 715", name: "Commuter Line Yogyakarta", time: "16:56:00", status: "berhenti" },
                    { number: "KA 86", name: "Sancaka", time: "16:59:59", status: "berhenti" },
                    { number: "PLB 7006", name: "Batavia", time: "17:02:00", status: "berhenti" },
                    { number: "KA 282", name: "Bengawan", time: "17:06:59", status: "langsung" },
                    { number: "PLB 7009", name: "Tambahan YK GMR", time: "17:10:00", status: "langsung" },
                    { number: "KA 557", name: "Bandara YIA", time: "17:15:00", status: "berhenti" },
                    { number: "KA 735F", name: "Commuter Line Yogyakarta", time: "17:19:00", status: "berhenti" },
                    { number: "KA 62", name: "Manahan", time: "17:23:00", status: "berhenti" },
                    { number: "KA 107", name: "Senja Utama Yk", time: "17:30:00", status: "langsung" },
                    { number: "KA 716", name: "Commuter Line Yogyakarta", time: "17:35:00", status: "berhenti" },
                    { number: "KA 247", name: "Logawa", time: "17:39:00", status: "langsung" },
                    { number: "KA 568", name: "Bandara YIA", time: "17:39:00", status: "berhenti" },
                    { number: "KA 736F", name: "Commuter Line Yogyakarta", time: "17:48:59", status: "berhenti" },
                    { number: "KA 506", name: "Commuter Line Prameks Kutoarjo", time: "17:52:00", status: "langsung" },
                    { number: "KA 707", name: "Commuter Line Yogyakarta", time: "17:55:00", status: "berhenti" },
                    { number: "KA 2722", name: "Kalem Service", time: "18:02:59", status: "langsung" },
                    { number: "KA 507", name: "Commuter Line Prameks Kutoarjo", time: "18:05:00", status: "langsung" },
                    { number: "KA 708", name: "Commuter Line Yogyakarta", time: "18:08:00", status: "berhenti" },
                    { number: "KA 532", name: "Bandara YIA", time: "18:13:00", status: "berhenti" },
                    { number: "KA 2751F", name: "Cilace Trans", time: "18:13:59", status: "langsung" },
                    { number: "KA 158", name: "Wijaya Kusuma", time: "18:22:59", status: "berhenti" },
                    { number: "KA 569", name: "Bandara YIA", time: "18:24:59", status: "berhenti" },
                    { number: "KA 251", name: "Jayakarta", time: "18:35:00", status: "langsung" },
                    { number: "KA 558", name: "Bandara YIA", time: "18:35:00", status: "berhenti" },
                    { number: "KA 90", name: "Gayabaru Malam Selatan", time: "18:49:00", status: "langsung" },
                    { number: "KA 559", name: "Bandara YIA", time: "18:49:59", status: "berhenti" },
                    { number: "KA 2715", name: "Karsolo Service", time: "18:58:59", status: "langsung" },
                    { number: "KA 256", name: "Jaka Tingkir", time: "19:00:00", status: "langsung" },
                    { number: "KA 533", name: "Bandara YIA", time: "19:16:00", status: "berhenti" },
                    { number: "KA 276", name: "Pasundan", time: "19:20:00", status: "langsung" },
                    { number: "KA 727", name: "Commuter Line Yogyakarta", time: "19:25:00", status: "berhenti" },
                    { number: "KA 544", name: "Bandara YIA", time: "19:29:00", status: "berhenti" },
                    { number: "KA 510", name: "Commuter Line Prameks Kebumen", time: "19:38:00", status: "berhenti" },
                    { number: "KA 73", name: "Senja Utama Solo", time: "19:41:59", status: "berhenti" },
                    { number: "KA 162", name: "Bangunkarta", time: "19:54:00", status: "berhenti" },
                    { number: "KA 79", name: "Lodaya", time: "19:56:00", status: "berhenti" },
                    { number: "KA 44", name: "Taksaka", time: "20:10:00", status: "berhenti" },
                    { number: "KA 545", name: "Bandara YIA", time: "20:12:00", status: "berhenti" },
                    { number: "KA 728", name: "Commuter Line Yogyakarta", time: "20:15:00", status: "berhenti" },
                    { number: "KA 35", name: "Gajayana", time: "20:19:00", status: "berhenti" },
                    { number: "KA 570", name: "Bandara YIA", time: "20:24:59", status: "berhenti" },
                    { number: "KA 83", name: "Sancaka", time: "20:35:00", status: "berhenti" },
                    { number: "KA 236F", name: "Sancaka Utara", time: "20:39:00", status: "berhenti" },
                    { number: "KA 105", name: "Gajahwong", time: "20:44:00", status: "langsung" },
                    { number: "KA 560", name: "Bandara YIA", time: "20:50:00", status: "berhenti" },
                    { number: "KA 45", name: "Taksaka", time: "21:04:59", status: "berhenti" },
                    { number: "KA 168", name: "Kertanegara", time: "21:04:59", status: "berhenti" },
                    { number: "KA 717", name: "Commuter Line Yogyakarta", time: "21:09:00", status: "berhenti" },
                    { number: "KA 718", name: "Commuter Line Yogyakarta", time: "21:20:00", status: "berhenti" },
                    { number: "KA 15", name: "Argo Dwipangga", time: "21:20:00", status: "berhenti" },
                    { number: "KA 534", name: "Bandara YIA", time: "21:33:59", status: "berhenti" },
                    { number: "KA 149", name: "Singasari", time: "21:42:59", status: "langsung" },
                    { number: "KA 2604", name: "Mawalo Tanker", time: "21:47:00", status: "langsung" },
                    { number: "PLB 7013", name: "Lodaya Tambahan SLO BD", time: "21:51:00", status: "berhenti" },
                    { number: "PLB 7026", name: "Tambahan PSE SLO", time: "21:55:00", status: "berhenti" },
                    { number: "KA 709", name: "Commuter Line Yogyakarta", time: "22:01:00", status: "berhenti" },
                    { number: "KA 546", name: "Bandara YIA", time: "22:05:00", status: "berhenti" },
                    { number: "KA 71", name: "Mutiara Selatan", time: "22:11:00", status: "berhenti" },
                    { number: "KA 157", name: "Wijaya Kusuma", time: "22:20:00", status: "berhenti" },
                    { number: "KA 88F", name: "Sancaka", time: "22:25:00", status: "berhenti" },
                    { number: "KA 710", name: "Commuter Line Yogyakarta", time: "22:35:00", status: "berhenti" },
                    { number: "KA 67", name: "Malabar", time: "22:36:00", status: "berhenti" },
                    { number: "PLB 7005", name: "Batavia", time: "22:51:00", status: "berhenti" },
                    { number: "KA 7", name: "Bima", time: "23:06:00", status: "berhenti" },
                    { number: "KA 63", name: "Manahan", time: "23:19:59", status: "berhenti" },
                    { number: "KA 8", name: "Bima", time: "23:24:59", status: "berhenti" },
                    { number: "KA 281", name: "Bengawan", time: "23:37:00", status: "langsung" },
                    { number: "KA 12", name: "Turangga", time: "23:42:00", status: "berhenti" },
                    { number: "KA 11", name: "Turangga", time: "23:44:59", status: "berhenti" },
                ],
                LPN: [
                    { number: "KA 255", name: "Jaka Tingkir", time: "00:24:59", status: "berhenti" },
                    { number: "KA 252", name: "Jayakarta", time: "00:33:00", status: "berhenti" },
                    { number: "KA 301", name: "Parcel Tengah", time: "00:38:59", status: "berhenti" },
                    { number: "KA 68", name: "Malabar", time: "00:58:59", status: "langsung" },
                    { number: "KA 305", name: "Parcel Selatan", time: "01:03:00", status: "berhenti" },
                    { number: "KA 2711", name: "Bungtalun Service", time: "01:21:00", status: "berhenti" },
                    { number: "KA 169", name: "Malioboro Ekspres", time: "01:30:59", status: "langsung" },
                    { number: "KA 36", name: "Gajayana", time: "01:32:00", status: "langsung" },
                    { number: "KA 104", name: "Bogowonto", time: "01:47:00", status: "berhenti" },
                    { number: "KA 80", name: "Lodaya", time: "01:56:00", status: "langsung" },
                    { number: "KA 87F", name: "Sancaka", time: "01:56:00", status: "langsung" },
                    { number: "KA 306", name: "Parcel Selatan", time: "02:26:59", status: "berhenti" },
                    { number: "KA 72", name: "Mutiara Selatan", time: "02:42:59", status: "langsung" },
                    { number: "KA 14", name: "Argo Lawu", time: "02:55:00", status: "langsung" },
                    { number: "KA 2721", name: "Kalem Service", time: "03:09:59", status: "berhenti" },
                    { number: "KA 302", name: "Parcel Tengah", time: "03:13:00", status: "berhenti" },
                    { number: "PLB 7023", name: "Tambahan SGU KAC", time: "03:25:00", status: "langsung" },
                    { number: "KA 2601", name: "Mawalo Tanker", time: "03:27:59", status: "langsung" },
                    { number: "KA 144", name: "Madiun Jaya", time: "04:05:00", status: "langsung" },
                    { number: "KA 76", name: "Mataram", time: "04:43:00", status: "langsung" },
                    { number: "KA 2750F", name: "Cilace Trans", time: "05:01:00", status: "langsung" },
                    { number: "KA 720", name: "Commuter Line Yogyakarta", time: "05:10:00", status: "berhenti" },
                    { number: "KA 150", name: "Singasari", time: "05:30:59", status: "berhenti" },
                    { number: "KA 729F", name: "Commuter Line Yogyakarta", time: "05:42:59", status: "berhenti" },
                    { number: "KA 64", name: "Manahan", time: "05:48:00", status: "langsung" },
                    { number: "KA 730F", name: "Commuter Line Yogyakarta", time: "06:04:00", status: "berhenti" },
                    { number: "KA 701", name: "Commuter Line Yogyakarta", time: "06:19:00", status: "berhenti" },
                    { number: "KA 274", name: "Kahuripan", time: "06:22:59", status: "berhenti" },
                    { number: "KA 258", name: "Progo", time: "06:40:00", status: "berhenti" },
                    { number: "KA 84", name: "Sancaka", time: "06:47:59", status: "" },
                    { number: "KA 193", name: "Joglosemarkerto", time: "06:58:00", status: "berhenti" },
                    { number: "KA 278", name: "Sri Tanjung", time: "07:00:00", status: "berhenti" },
                    { number: "KA 702", name: "Commuter Line Yogyakarta", time: "07:10:00", status: "berhenti" },
                    { number: "KA 2712", name: "Bungtalun Service", time: "07:18:59", status: "berhenti" },
                    { number: "KA 711", name: "Commuter Line Yogyakarta", time: "07:25:00", status: "berhenti" },
                    { number: "KA 712", name: "Commuter Line Yogyakarta", time: "07:59:00", status: "berhenti" },
                    { number: "KA 77", name: "Lodaya", time: "08:03:00", status: "langsung" },
                    { number: "KA 103", name: "Bogowonto", time: "08:15:00", status: "berhenti" },
                    { number: "PLB 7024", name: "Tambahan KAC SGU", time: "08:23:00", status: "" },
                    { number: "KA 721", name: "Commuter Line Yogyakarta", time: "08:35:00", status: "berhenti" },
                    { number: "KA 722", name: "Commuter Line Yogyakarta", time: "08:54:00", status: "berhenti" },
                    { number: "KA 731F", name: "Commuter Line Yogyakarta", time: "09:00:59", status: "berhenti" },
                    { number: "KA 13", name: "Argo Lawu", time: "09:11:00", status: "langsung" },
                    { number: "KA 248", name: "Logawa", time: "09:31:00", status: "berhenti" },
                    { number: "KA 75", name: "Mataram", time: "09:33:00", status: "langsung" },
                    { number: "KA 732F", name: "Commuter Line Yogyakarta", time: "09:40:00", status: "berhenti" },
                    { number: "KA 275", name: "Pasundan", time: "09:49:00", status: "berhenti" },
                    { number: "KA 143", name: "Madiun Jaya", time: "10:05:00", status: "langsung" },
                    { number: "KA 703", name: "Commuter Line Yogyakarta", time: "10:23:00", status: "berhenti" },
                    { number: "KA 61", name: "Manahan", time: "10:30:59", status: "langsung" },
                    { number: "KA 161", name: "Bangunkarta", time: "10:43:00", status: "langsung" },
                    { number: "KA 170", name: "Malioboro Ekspres", time: "10:54:00", status: "langsung" },
                    { number: "KA 81", name: "Sancaka", time: "10:56:00", status: "langsung" },
                    { number: "KA 704", name: "Commuter Line Yogyakarta", time: "11:01:00", status: "berhenti" },
                    { number: "KA 89", name: "Gayabaru Malam Selatan", time: "11:05:00", status: "berhenti" },
                    { number: "KA 2602", name: "Mawalo Tanker", time: "11:10:00", status: "langsung" },
                    { number: "KA 2716", name: "Karsolo Service", time: "11:19:00", status: "berhenti" },
                    { number: "KA 69", name: "Malabar", time: "11:23:00", status: "langsung" },
                    { number: "KA 82", name: "Sancaka", time: "11:33:00", status: "langsung" },
                    { number: "KA 154", name: "Ranggajati", time: "11:50:00", status: "langsung" },
                    { number: "KA 713", name: "Commuter Line Yogyakarta", time: "11:53:59", status: "berhenti" },
                    { number: "KA 723", name: "Commuter Line Yogyakarta", time: "11:55:00", status: "berhenti" },
                    { number: "KA 9", name: "Argo Wilis", time: "12:06:00", status: "langsung" },
                    { number: "KA 724", name: "Commuter Line Yogyakarta", time: "12:12:00", status: "berhenti" },
                    { number: "KA 733F", name: "Commuter Line Yogyakarta", time: "12:35:00", status: "berhenti" },
                    { number: "KA 74", name: "Fajar Utama Solo", time: "12:40:00", status: "langsung" },
                    { number: "KA 5", name: "Argo Semeru", time: "12:47:59", status: "langsung" },
                    { number: "KA 6", name: "Argo Semeru", time: "12:53:00", status: "langsung" },
                    { number: "KA 235F", name: "Sancaka Utara", time: "12:58:00", status: "langsung" },
                    { number: "KA 257", name: "Progo", time: "13:09:59", status: "berhenti" },
                    { number: "KA 78", name: "Lodaya", time: "13:20:00", status: "langsung" },
                    { number: "KA 10", name: "Argo Wilis", time: "13:30:00", status: "langsung" },
                    { number: "KA 734F", name: "Commuter Line Yogyakarta", time: "13:34:59", status: "berhenti" },
                    { number: "KA 2603", name: "Mawalo Tanker", time: "13:54:59", status: "langsung" },
                    { number: "KA 714", name: "Commuter Line Yogyakarta", time: "14:02:00", status: "berhenti" },
                    { number: "KA 705", name: "Commuter Line Yogyakarta", time: "14:08:00", status: "berhenti" },
                    { number: "KA 153", name: "Ranggajati", time: "14:17:59", status: "langsung" },
                    { number: "KA 167", name: "Kertanegara", time: "14:26:59", status: "langsung" },
                    { number: "KA 188", name: "Joglosemarkerto", time: "14:41:00", status: "berhenti" },
                    { number: "KA 16", name: "Argo Dwipangga", time: "14:59:00", status: "langsung" },
                    { number: "KA 725", name: "Commuter Line Yogyakarta", time: "15:01:00", status: "berhenti" },
                    { number: "KA 706", name: "Commuter Line Yogyakarta", time: "15:06:00", status: "berhenti" },
                    { number: "KA 85", name: "Sancaka", time: "15:11:00", status: "langsung" },
                    { number: "PLB 7021", name: "Pasundan Tambahan", time: "15:38:00", status: "berhenti" },
                    { number: "KA 106", name: "Gajahwong", time: "15:49:59", status: "berhenti" },
                    { number: "KA 726", name: "Commuter Line Yogyakarta", time: "16:15:00", status: "berhenti" },
                    { number: "KA 70", name: "Malabar", time: "16:38:00", status: "langsung" },
                    { number: "KA 715", name: "Commuter Line Yogyakarta", time: "16:52:00", status: "berhenti" },
                    { number: "KA 86", name: "Sancaka", time: "17:03:00", status: "langsung" },
                    { number: "KA 282", name: "Bengawan", time: "17:10:00", status: "berhenti" },
                    { number: "KA 735F", name: "Commuter Line Yogyakarta", time: "17:14:00", status: "berhenti" },
                    { number: "KA 247", name: "Logawa", time: "17:26:59", status: "berhenti" },
                    { number: "KA 62", name: "Manahan", time: "17:30:59", status: "langsung" },
                    { number: "KA 716", name: "Commuter Line Yogyakarta", time: "17:40:00", status: "berhenti" },
                    { number: "KA 707", name: "Commuter Line Yogyakarta", time: "17:49:00", status: "berhenti" },
                    { number: "KA 736F", name: "Commuter Line Yogyakarta", time: "17:53:00", status: "berhenti" },
                    { number: "KA 2722", name: "Kalem Service", time: "18:06:00", status: "berhenti" },
                    { number: "KA 2751F", name: "Cilace Trans", time: "18:09:59", status: "langsung" },
                    { number: "KA 708", name: "Commuter Line Yogyakarta", time: "18:13:00", status: "berhenti" },
                    { number: "KA 251", name: "Jayakarta", time: "18:26:00", status: "berhenti" },
                    { number: "KA 158", name: "Wijaya Kusuma", time: "18:35:00", status: "langsung" },
                    { number: "KA 2715", name: "Karsolo Service", time: "18:40:59", status: "berhenti" },
                    { number: "KA 90", name: "Gayabaru Malam Selatan", time: "18:53:00", status: "berhenti" },
                    { number: "KA 256", name: "Jaka Tingkir", time: "19:03:00", status: "berhenti" },
                    { number: "KA 727", name: "Commuter Line Yogyakarta", time: "19:21:00", status: "berhenti" },
                    { number: "KA 276", name: "Pasundan", time: "19:25:00", status: "berhenti" },
                    { number: "KA 277", name: "Sri Tanjung", time: "19:32:59", status: "berhenti" },
                    { number: "KA 73", name: "Senja Utama Solo", time: "19:39:00", status: "langsung" },
                    { number: "KA 79", name: "Lodaya", time: "19:52:00", status: "langsung" },
                    { number: "KA 162", name: "Bangunkarta", time: "20:01:00", status: "langsung" },
                    { number: "KA 35", name: "Gajayana", time: "20:15:59", status: "langsung" },
                    { number: "KA 728", name: "Commuter Line Yogyakarta", time: "20:20:00", status: "berhenti" },
                    { number: "KA 83", name: "Sancaka", time: "20:30:59", status: "langsung" },
                    { number: "KA 105", name: "Gajahwong", time: "20:39:59", status: "berhenti" },
                    { number: "KA 236F", name: "Sancaka Utara", time: "20:46:59", status: "langsung" },
                    { number: "KA 717", name: "Commuter Line Yogyakarta", time: "21:05:00", status: "berhenti" },
                    { number: "KA 168", name: "Kertanegara", time: "21:13:59", status: "langsung" },
                    { number: "KA 15", name: "Argo Dwipangga", time: "21:15:59", status: "langsung" },
                    { number: "KA 718", name: "Commuter Line Yogyakarta", time: "21:25:00", status: "berhenti" },
                    { number: "KA 149", name: "Singasari", time: "21:33:59", status: "langsung" },
                    { number: "KA 2604", name: "Mawalo Tanker", time: "21:49:59", status: "langsung" },
                    { number: "KA 709", name: "Commuter Line Yogyakarta", time: "21:57:00", status: "berhenti" },
                    { number: "KA 71", name: "Mutiara Selatan", time: "22:07:00", status: "langsung" },
                    { number: "KA 157", name: "Wijaya Kusuma", time: "22:16:00", status: "langsung" },
                    { number: "KA 88F", name: "Sancaka", time: "22:27:59", status: "langsung" },
                    { number: "KA 67", name: "Malabar", time: "22:32:00", status: "langsung" },
                    { number: "KA 710", name: "Commuter Line Yogyakarta", time: "22:40:00", status: "berhenti" },
                    { number: "KA 7", name: "Bima", time: "23:01:59", status: "langsung" },
                    { number: "KA 63", name: "Manahan", time: "23:15:59", status: "langsung" },
                    { number: "KA 281", name: "Bengawan", time: "23:28:59", status: "berhenti" },
                    { number: "KA 8", name: "Bima", time: "23:33:00", status: "langsung" },
                    { number: "KA 11", name: "Turangga", time: "23:41:00", status: "langsung" },
                    { number: "KA 12", name: "Turangga", time: "23:50:00", status: "langsung" },
                    { number: "KA 273", name: "Kahuripan", time: "23:53:59", status: "berhenti" },
                ],
            };

            // Nama stasiun lengkap
            const stationNames = {
                YK: "Stasiun Yogyakarta (YK)",
                LPN: "Stasiun Lempuyangan (LPN)",
            };

            let currentStation = null;
            let currentTime = new Date();

            function updateClock() {
                currentTime = new Date();
                const timeString = currentTime.toLocaleTimeString("id-ID", { hour: "2-digit", minute: "2-digit", second: "2-digit" });
                const dateString = currentTime.toLocaleDateString("id-ID", { weekday: "long", year: "numeric", month: "long", day: "numeric" });

                document.getElementById("currentTime").textContent = timeString;
                document.getElementById("currentDate").textContent = dateString;

                // Update kereta realtime
                if (currentStation) displayTrains(currentStation);
            }

            function timeToMinutes(timeStr) {
                const [hours, minutes, seconds] = timeStr.split(":").map(Number);
                return hours * 60 + minutes + seconds / 60;
            }

            function formatTime(timeStr) {
                const [h, m] = timeStr.split(":");
                return `${h.padStart(2, "0")}:${m.padStart(2, "0")}`;
            }

            function filterTrains(station) {
                if (!station) return { passedTrains: [], currentTrains: [], upcomingTrains: [] };

                const currentMinutes = currentTime.getHours() * 60 + currentTime.getMinutes() + currentTime.getSeconds() / 60;
                const stationTrains = trainSchedules[station];

                const passedTrains = stationTrains
                    .filter((train) => timeToMinutes(train.time) < currentMinutes)
                    .sort((a, b) => timeToMinutes(b.time) - timeToMinutes(a.time))
                    .slice(0, 2);

                const currentTrains = stationTrains.filter((train) => {
                    const trainMinutes = timeToMinutes(train.time);
                    return Math.abs(trainMinutes - currentMinutes) <= 2;
                });

                const upcomingTrains = stationTrains
                    .filter((train) => timeToMinutes(train.time) > currentMinutes)
                    .sort((a, b) => timeToMinutes(a.time) - timeToMinutes(b.time))
                    .slice(0, 2);

                return { passedTrains, currentTrains, upcomingTrains };
            }

            function displayTrains(station) {
                currentStation = station;
                document.getElementById("stationName").textContent = stationNames[station];

                const { passedTrains, currentTrains, upcomingTrains } = filterTrains(station);

                const sections = [
                    { id: "passedTrains", trains: passedTrains, msg: "Tidak ada data", prefix: "Melintas pukul" },
                    { id: "currentTrains", trains: currentTrains, msg: "Tidak ada kereta yang sedang melintas", prefix: "Jadwal pukul" },
                    { id: "upcomingTrains", trains: upcomingTrains, msg: "Tidak ada jadwal dalam waktu dekat", prefix: "Akan melintas pukul" },
                ];

                sections.forEach((sec) => {
                    const list = document.getElementById(sec.id);
                    list.innerHTML = "";

                    if (sec.trains.length > 0) {
                        sec.trains.forEach((train) => {
                            const li = document.createElement("li");
                            li.className = "train-item";
                            li.innerHTML = `
                            <div class="train-number">${train.number}</div>
                            <div class="train-name">${train.name}</div>
                            <div class="train-time">${sec.prefix} ${formatTime(train.time)}</div>
                            <span class="train-status ${train.status}">
                                ${train.status === "berhenti" ? "Berhenti" : "Langsung"}
                            </span>
                        `;
                            list.appendChild(li);
                        });
                    } else {
                        list.innerHTML = `<li class="no-trains">${sec.msg}</li>`;
                    }
                });
            }

            // Event listeners
            document.querySelectorAll(".station-btn").forEach((btn) => {
                btn.addEventListener("click", function () {
                    document.querySelectorAll(".station-btn").forEach((b) => b.classList.remove("active"));
                    this.classList.add("active");
                    displayTrains(this.dataset.station);
                });
            });

            document.getElementById("refreshBtn").addEventListener("click", function () {
                updateClock();
            });

            // Init
            updateClock();
            setInterval(updateClock, 1000);

            // Default stasiun
            document.querySelector('[data-station="YK"]').click();

            // Fungsi untuk mengirim kritik dan saran ke WhatsApp
            function setupFeedbackForm() {
                const feedbackForm = document.getElementById("feedbackForm");
                const feedbackInput = document.getElementById("feedbackInput");
                const feedbackSubmit = document.getElementById("feedbackSubmit");

                feedbackForm.addEventListener("submit", function (e) {
                    e.preventDefault();

                    const message = feedbackInput.value.trim();
                    if (!message) return;

                    // Encode pesan untuk URL
                    const encodedMessage = encodeURIComponent(message);

                    // Nomor WhatsApp tujuan
                    const phoneNumber = "6285602321009";

                    // Buat URL WhatsApp
                    const whatsappURL = `https://wa.me/${phoneNumber}?text=${encodedMessage}`;

                    // Buka jendela baru untuk WhatsApp
                    window.open(whatsappURL, "_blank");

                    // Reset form
                    feedbackInput.value = "";
                });
            }

            // Panggil fungsi setup saat halaman dimuat
            document.addEventListener("DOMContentLoaded", function () {
                // ... (panggilan fungsi yang sudah ada) ...
                setupFeedbackForm();
            });

            // Fungsi untuk menampilkan jadwal lengkap dalam modal
            function showFullSchedule(station) {
                const modal = document.getElementById('scheduleModal');
                const tableContainer = document.getElementById('scheduleTableContainer');

                // Update tab aktif
                document.querySelectorAll('.station-tab').forEach(tab => {
                    tab.classList.remove('active');
                    if (tab.dataset.station === station) {
                        tab.classList.add('active');
                    }
                });

                // Filter dan urutkan jadwal
                const trains = [...trainSchedules[station]].sort((a, b) => {
                    return timeToMinutes(a.time) - timeToMinutes(b.time);
                });

                // Buat tabel
                let tableHTML = `
    <table class="schedule-table">
      <thead>
        <tr>
          <th>No. Kereta</th>
          <th>Nama Kereta</th>
          <th>Waktu</th>
          <th>Status</th>
        </tr>
      </thead>
      <tbody>
  `;

                trains.forEach(train => {
                    tableHTML += `
      <tr>
        <td>${train.number}</td>
        <td>${train.name}</td>
        <td>${formatTime(train.time)}</td>
        <td><span class="status-badge status-${train.status}">${train.status === 'berhenti' ? 'Berhenti' : 'Langsung'}</span></td>
      </tr>
    `;
                });

                tableHTML += `
      </tbody>
    </table>
  `;

                tableContainer.innerHTML = tableHTML;
                modal.classList.add('show');

                // Setup pencarian
                const searchInput = document.getElementById('trainSearch');
                searchInput.value = '';
                searchInput.oninput = function () {
                    const searchText = this.value.toLowerCase();
                    const rows = tableContainer.querySelectorAll('tbody tr');

                    rows.forEach(row => {
                        const trainNumber = row.cells[0].textContent.toLowerCase();
                        const trainName = row.cells[1].textContent.toLowerCase();

                        if (trainNumber.includes(searchText) || trainName.includes(searchText)) {
                            row.style.display = '';
                        } else {
                            row.style.display = 'none';
                        }
                    });
                };
            }

            // Event listener untuk tombol jadwal lengkap
            document.getElementById("showScheduleBtn").addEventListener("click", function () {
                const activeStation = document.querySelector('.station-btn.active').dataset.station;
                showFullSchedule(activeStation);
            });

            // Event listener untuk tutup modal
            document.querySelector('.close-btn').addEventListener('click', function () {
                document.getElementById('scheduleModal').classList.remove('show');
            });

            // Event listener untuk tab stasiun di modal
            document.querySelectorAll('.station-tab').forEach(tab => {
                tab.addEventListener('click', function () {
                    showFullSchedule(this.dataset.station);
                });
            });

            // Tutup modal saat klik di luar konten
            window.addEventListener('click', function (event) {
                const modal = document.getElementById('scheduleModal');
                if (event.target === modal) {
                    modal.classList.remove('show');
                }
            });

            // Fungsi untuk mengelola fitur rating dan ulasan
            function setupReviewSystem() {
                const reviewForm = document.getElementById('reviewForm');
                const ratingInputs = document.querySelectorAll('.star-rating i');
                const ratingValue = document.getElementById('ratingValue');
                const reviewsList = document.getElementById('reviewsList');

                // Load ulasan yang tersimpan
                loadReviews();

                // Setup rating bintang
                ratingInputs.forEach(star => {
                    star.addEventListener('click', function () {
                        const rating = parseInt(this.getAttribute('data-rating'));
                        ratingValue.value = rating;

                        // Update tampilan bintang
                        ratingInputs.forEach(s => {
                            const starRating = parseInt(s.getAttribute('data-rating'));
                            if (starRating <= rating) {
                                s.classList.remove('far');
                                s.classList.add('fas', 'active');
                            } else {
                                s.classList.remove('fas', 'active');
                                s.classList.add('far');
                            }
                        });
                    });

                    // Efek hover pada bintang
                    star.addEventListener('mouseover', function () {
                        const hoverRating = parseInt(this.getAttribute('data-rating'));

                        ratingInputs.forEach(s => {
                            const starRating = parseInt(s.getAttribute('data-rating'));
                            if (starRating <= hoverRating) {
                                s.classList.remove('far');
                                s.classList.add('fas');
                            } else {
                                s.classList.remove('fas');
                                s.classList.add('far');
                            }
                        });
                    });

                    // Kembali ke rating terpilih saat mouseout
                    star.addEventListener('mouseout', function () {
                        const currentRating = parseInt(ratingValue.value);

                        ratingInputs.forEach(s => {
                            const starRating = parseInt(s.getAttribute('data-rating'));
                            if (starRating <= currentRating) {
                                s.classList.remove('far');
                                s.classList.add('fas', 'active');
                            } else {
                                s.classList.remove('fas', 'active');
                                s.classList.add('far');
                            }
                        });
                    });
                });

                // Handle submit form ulasan
                reviewForm.addEventListener('submit', function (e) {
                    e.preventDefault();

                    const rating = parseInt(ratingValue.value);
                    const reviewerName = document.getElementById('reviewerName').value.trim();
                    const reviewContent = document.getElementById('reviewContent').value.trim();

                    // Validasi
                    if (rating === 0) {
                        alert('Silakan beri rating dengan memilih bintang');
                        return;
                    }

                    if (!reviewContent) {
                        alert('Silakan tulis ulasan Anda');
                        return;
                    }

                    // Simpan ulasan
                    saveReview({
                        rating: rating,
                        reviewer: reviewerName || 'Anonim',
                        content: reviewContent,
                        date: new Date().toISOString()
                    });

                    // Reset form
                    reviewForm.reset();
                    ratingValue.value = 0;
                    ratingInputs.forEach(star => {
                        star.classList.remove('fas', 'active');
                        star.classList.add('far');
                    });

                    alert('Terima kasih! Ulasan Anda telah diterima.');
                });
            }

            // Fungsi untuk menyimpan ulasan ke localStorage
            function saveReview(review) {
                let reviews = JSON.parse(localStorage.getItem('trainReviews')) || [];
                reviews.unshift(review); // Tambahkan di awal array
                localStorage.setItem('trainReviews', JSON.stringify(reviews));

                // Perbarui tampilan
                loadReviews();
            }

            // Fungsi untuk memuat dan menampilkan ulasan
            function loadReviews() {
                const reviewsList = document.getElementById('reviewsList');
                const reviews = JSON.parse(localStorage.getItem('trainReviews')) || [];

                if (reviews.length === 0) {
                    reviewsList.innerHTML = '<p class="no-reviews">Belum ada ulasan. Jadilah yang pertama memberikan ulasan!</p>';
                    return;
                }

                reviewsList.innerHTML = '';

                reviews.forEach(review => {
                    const reviewDate = new Date(review.date);
                    const formattedDate = reviewDate.toLocaleDateString('id-ID', {
                        year: 'numeric',
                        month: 'long',
                        day: 'numeric'
                    });

                    // Buat elemen HTML untuk ulasan
                    const reviewEl = document.createElement('div');
                    reviewEl.className = 'review-item';

                    // Generate bintang rating
                    let starsHtml = '';
                    for (let i = 1; i <= 5; i++) {
                        if (i <= review.rating) {
                            starsHtml += '<i class="fas fa-star"></i>';
                        } else {
                            starsHtml += '<i class="far fa-star"></i>';
                        }
                    }

                    reviewEl.innerHTML = `
                <div class="review-header">
                    <div class="reviewer-name">${review.reviewer}</div>
                    <div class="review-date">${formattedDate}</div>
                </div>
                <div class="review-stars">${starsHtml}</div>
                <div class="review-content">${review.content}</div>
            `;

                    reviewsList.appendChild(reviewEl);
                });
            }

            // Panggil fungsi setup saat halaman dimuat
            document.addEventListener('DOMContentLoaded', function () {
                setupReviewSystem();
            });
        </script>
</body>

</html>